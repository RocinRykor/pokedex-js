let pokemonRepository = (function () {
    let t = [];
    function e(t) {
        return fetch(t.detailsURL)
            .then(function (t) {
                return t.json();
            })
            .then(function (e) {
                (t.imageFront = e.sprites.front_default),
                    (t.imageBack = e.sprites.back_default),
                    (t.height = e.height),
                    (t.weight = e.weight),
                    (t.types = e.types);
            })
            .catch(function (t) {
                console.error(t);
            });
    }
    function n(e) {
        t.push(e);
    }
    function o() {
        return t;
    }
    function i(t) {
        return t.charAt(0).toUpperCase() + t.slice(1);
    }
    function a(t) {
        e(t).then(function () {
            var e, n, o, a;
            let r, s, c, l;
            (e = t),
                $(".modal-title").html(i(e.name)),
                $("#image-front").attr("src", e.imageFront),
                $("#image-rear").attr("src", e.imageBack),
                $("#details-height").text(
                    "Height: " +
                        ((n = e.height),
                        (r = n / 10),
                        (s = Math.floor(r / 0.0254)),
                        `${r}m (${Math.floor(s / 12)}' ${s % 12}")`)
                ),
                $("#details-weight").text(
                    "Weight: " +
                        ((o = e.weight),
                        (c = o / 10),
                        `${c} kg (${(c / 0.45359237).toFixed(1)} lbs)`)
                ),
                $("#details-types").text(
                    "Types: " +
                        ((a = e.types),
                        (l = i(a[0].type.name)),
                        a.length > 1 ? `${l}/${i(a[1].type.name)}` : l)
                );
        });
    }
    return {
        add: n,
        getAll: o,
        addListItem: function t(e) {
            (function t(e) {
                let n = $(".pokemon-list"),
                    o = $("<div class='pokemon-card'></div>"),
                    i = $(
                        "<p class='card-title'>" + e.name.toUpperCase() + "</p>"
                    ),
                    r = $(
                        "<img src='https://via.placeholder.com/100' class='card-image' id='" +
                            e.name +
                            "'></img>"
                    ),
                    s = $(
                        '<button type="button" class="card-button btn" data-toggle="modal" data-target="#pokemonModal">Details</button>'
                    );
                s.on("click", function () {
                    a(e);
                });
                let c = $("<div class='card-body'></div>");
                return (
                    c.append(r),
                    c.append(s),
                    o.append(i),
                    o.append(c),
                    n.append(o),
                    o
                );
            })(e),
                pokemonRepository.loadDetails(e).then(function () {
                    $("#" + e.name).attr("src", e.imageFront);
                });
        },
        loadlist: function t() {
            return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150")
                .then(function (t) {
                    return t.json();
                })
                .then(function (t) {
                    t.results.forEach(function (t) {
                        n({ name: t.name, detailsURL: t.url });
                    });
                })
                .catch(function (t) {
                    console.error(t);
                });
        },
        loadDetails: e,
        showDetails: a,
    };
})();
pokemonRepository.loadlist().then(function () {
    pokemonRepository.getAll().forEach(function t(e) {
        pokemonRepository.addListItem(e);
    });
});
